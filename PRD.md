# VIBE CODING COMMUNITY - 产品需求文档 (PRD)

**版本**: 1.0  
**日期**: 2024  
**状态**: Active

---

## 1. 产品概述

### 1.1 产品定位
VIBE CODING COMMUNITY 是一个面向Web开发者的粗野主义风格社区论坛平台，旨在为有"vibe"的程序员提供一个分享编程想法、交流技术见解的简洁、直接、无装饰的交流空间。

### 1.2 产品愿景
创建一个专注于内容本身的开发者社区，去除一切不必要的装饰，让编程思想和创意能够直接、纯粹地传递。

### 1.3 核心价值主张
- **极简设计**: 粗野主义美学，去除所有装饰性元素
- **快速分享**: 零门槛发布和浏览内容
- **专注内容**: 无算法干扰，按时间线展示
- **开发者友好**: 支持代码、图片、标签等多种内容形式

---

## 2. 目标用户

### 2.1 主要用户画像
- **Web开发者**: 前端、全栈开发者
- **技术爱好者**: 对Web技术感兴趣的个人
- **创作者**: 喜欢分享编程想法和项目的人

### 2.2 用户需求
- 快速分享编程想法和项目
- 获取技术反馈和建议
- 发现有趣的编程项目
- 与技术社区互动

---

## 3. 核心功能

### 3.1 用户认证系统
**优先级**: P0

#### 功能描述
支持多种登录方式，降低用户注册门槛。

#### 功能详述
- **OAuth登录**
  - Google OAuth登录
  - GitHub OAuth登录
  - 自动获取用户头像和昵称
- **邮箱/密码登录**
  - 邮箱注册
  - 邮箱登录
  - 密码重置（待实现）

#### 用户交互
- 登录状态持久化
- 自动登录检测
- 登出功能

#### 技术实现
- 使用InsForge Auth服务
- 支持OAuth 2.0协议
- 用户信息存储在`users`表

---

### 3.2 帖子发布系统
**优先级**: P0

#### 功能描述
用户可以创建和发布帖子，分享编程想法、项目或技术见解。

#### 功能详述
- **帖子内容**
  - 标题（必填，最大200字符）
  - 正文内容（必填，支持多行文本）
  - 图片上传（可选，支持常见图片格式）
  - 标签（可选，逗号分隔，用于分类）
- **发布流程**
  - 实时预览图片
  - 表单验证
  - 发布成功后自动刷新列表

#### 用户交互
- 表单式输入界面
- 图片预览功能
- 标签输入提示
- 提交状态反馈

#### 技术实现
- 图片上传至InsForge Storage（`post-images` bucket）
- 数据存储在`posts`表
- 关联用户ID，支持用户删除自己的帖子

---

### 3.3 帖子浏览系统
**优先级**: P0

#### 功能描述
用户浏览和阅读社区中的帖子。

#### 功能详述
- **帖子列表**
  - 按时间倒序展示（最新在前）
  - 显示作者信息（头像、昵称）
  - 显示发布时间
  - 显示点赞数
  - 显示评论数（待实现）
- **帖子详情**
  - 完整标题和内容
  - 图片展示（响应式）
  - 标签展示
  - 作者信息
  - 时间戳

#### 用户交互
- 无限滚动（待实现）
- 点击展开/收起评论
- 响应式布局

#### 技术实现
- 使用PostgreSQL查询，支持分页
- 关联查询用户信息
- 图片CDN加速

---

### 3.4 点赞系统
**优先级**: P0

#### 功能描述
用户可以对帖子表示喜欢和支持。

#### 功能详述
- **点赞功能**
  - 点击按钮切换点赞状态
  - 实时更新点赞数
  - 已点赞状态视觉反馈
  - 防止重复点赞（同一用户对同一帖子只能点赞一次）

#### 用户交互
- 按钮点击反馈
- 点赞数实时更新
- 未登录用户提示登录

#### 技术实现
- 数据存储在`likes`表
- 联合主键（post_id, user_id）防止重复
- 实时查询点赞状态

---

### 3.5 评论系统
**优先级**: P0

#### 功能描述
用户可以对帖子进行评论和讨论。

#### 功能详述
- **评论功能**
  - 多行文本输入
  - 发表评论
  - 展示评论列表（按时间正序）
  - 显示评论者信息
  - 显示评论时间
- **评论管理**
  - 用户可删除自己的评论
  - 删除确认提示

#### 用户交互
- 折叠/展开评论区域
- 评论表单实时显示
- 删除确认对话框

#### 技术实现
- 数据存储在`comments`表
- 关联查询用户信息
- 支持级联删除（待实现）

---

### 3.6 内容管理
**优先级**: P1

#### 功能描述
用户管理自己创建的内容。

#### 功能详述
- **帖子管理**
  - 删除自己的帖子
  - 删除确认提示
- **评论管理**
  - 删除自己的评论
  - 删除确认提示

#### 用户交互
- 仅对内容所有者显示删除按钮
- 删除前确认对话框

---

## 4. UI/UX设计规范

### 4.1 设计风格：粗野主义（Brutalism）
- **核心原则**: 功能优先，去除装饰
- **视觉特征**: 
  - 黑色边框，白色背景
  - 无圆角，直角设计
  - 无渐变，纯色填充
  - 无阴影，扁平设计
  - 系统字体，无自定义字体

### 4.2 排版规范
- **字体大小**: 
  - 标题：20px
  - 正文：15px
  - 辅助文字：13px
  - 小字：11-12px
- **文字样式**: 
  - 全小写（text-transform: lowercase）
  - 正常字重（font-weight: normal）
  - 1.7-1.85行高

### 4.3 颜色规范
- **主色调**: 
  - 背景：纯白 (#fff)
  - 文字：纯黑 (#000)
  - 边框：纯黑 (#000)
- **交互状态**: 
  - 默认：白色背景，黑色文字
  - 激活/悬停：黑色背景，白色文字
  - 禁用：灰色背景（待实现）

### 4.4 间距规范
- **主要间距**: 40px, 30px, 20px
- **次要间距**: 15px, 12px, 8px
- **内边距**: 
  - 卡片：30-40px
  - 按钮：10-12px 垂直，20-24px 水平

### 4.5 组件规范
- **卡片**: 
  - 1px黑色边框
  - 白色背景
  - 30-40px内边距
- **按钮**: 
  - 1px黑色边框
  - 白色背景，黑色文字
  - 激活时反转
  - 全小写文字
- **输入框**: 
  - 1px黑色边框
  - 白色背景
  - 12px垂直内边距，16px水平内边距

---

## 5. 数据模型

### 5.1 数据库表结构

#### users（用户表）
- `id` (UUID, Primary Key)
- `email` (String, Unique)
- `nickname` (String, Nullable)
- `avatar_url` (String, Nullable)
- `bio` (String, Nullable)
- `created_at` (Timestamp)
- `updated_at` (Timestamp)

#### posts（帖子表）
- `id` (UUID, Primary Key)
- `user_id` (UUID, Foreign Key -> users.id)
- `title` (String, Required)
- `content` (Text, Required)
- `image_url` (String, Nullable)
- `tags` (Array[String], Nullable)
- `created_at` (Timestamp)
- `updated_at` (Timestamp)

#### comments（评论表）
- `id` (UUID, Primary Key)
- `post_id` (UUID, Foreign Key -> posts.id)
- `user_id` (UUID, Foreign Key -> users.id)
- `content` (Text, Required)
- `created_at` (Timestamp)
- `updated_at` (Timestamp)

#### likes（点赞表）
- `id` (UUID, Primary Key)
- `post_id` (UUID, Foreign Key -> posts.id)
- `user_id` (UUID, Foreign Key -> users.id)
- `created_at` (Timestamp)
- **约束**: Unique(post_id, user_id)

### 5.2 存储结构

#### Storage Buckets
- `post-images` (Public)
  - 存储帖子图片
  - 公开访问
  - 文件命名：`{timestamp}-{filename}`

---

## 6. 技术架构

### 6.1 前端技术栈
- **框架**: Next.js 14 (App Router)
- **语言**: TypeScript
- **样式**: 内联样式（Brutalist风格）
- **状态管理**: React Hooks (useState, useEffect)

### 6.2 后端技术栈
- **BaaS**: InsForge
  - 数据库：PostgreSQL（通过PostgREST）
  - 认证：InsForge Auth
  - 存储：InsForge Storage
  - API：RESTful API

### 6.3 项目结构
```
app/
  ├── layout.tsx       # 根布局
  ├── page.tsx         # 首页
  └── globals.css      # 全局样式

components/
  ├── Auth.tsx         # 认证组件
  ├── PostCard.tsx     # 帖子卡片组件
  ├── CreatePost.tsx   # 创建帖子组件
  └── CommentSection.tsx # 评论组件

lib/
  └── insforge.ts      # InsForge客户端配置
```

---

## 7. 功能优先级

### P0 - 核心功能（已实现）
- ✅ 用户认证（OAuth + 邮箱密码）
- ✅ 帖子发布
- ✅ 帖子浏览
- ✅ 点赞功能
- ✅ 评论功能
- ✅ 内容删除

### P1 - 重要功能（待实现）
- ⏳ 用户个人资料页面
- ⏳ 帖子搜索功能
- ⏳ 标签筛选
- ⏳ 用户关注系统
- ⏳ 通知系统
- ⏳ 帖子编辑功能
- ⏳ 图片压缩/优化
- ⏳ 无限滚动分页

### P2 - 增强功能（待实现）
- ⏳ 代码高亮支持
- ⏳ Markdown支持
- ⏳ 帖子收藏功能
- ⏳ 私信功能
- ⏳ 管理员功能
- ⏳ 内容审核
- ⏳ 统计分析

---

## 8. 非功能性需求

### 8.1 性能要求
- 页面首次加载时间 < 2秒
- 帖子列表加载时间 < 1秒
- 图片上传时间 < 5秒（取决于网络）

### 8.2 可用性要求
- 移动端响应式设计
- 浏览器兼容性：Chrome, Firefox, Safari, Edge（最新版本）
- 无障碍访问（待实现）

### 8.3 安全要求
- 用户认证必须安全
- 防止XSS攻击
- 防止CSRF攻击
- 数据验证（前后端）
- RLS（Row Level Security）策略（待实现）

### 8.4 可扩展性
- 支持大量并发用户
- 数据库查询优化
- CDN加速图片访问

---

## 9. 用户故事

### 9.1 作为新用户
- 我想快速注册账号，以便开始使用社区
- 我想使用Google或GitHub账号登录，以便快速开始
- 我想浏览社区内容，了解社区氛围

### 9.2 作为注册用户
- 我想发布帖子，分享我的编程想法
- 我想上传图片，让我的帖子更生动
- 我想给帖子添加标签，方便分类
- 我想点赞有趣的帖子
- 我想评论帖子，参与讨论
- 我想删除我发布的内容

### 9.3 作为资深用户
- 我想搜索特定主题的帖子
- 我想按标签筛选内容
- 我想关注其他用户
- 我想收到新的评论和点赞通知

---

## 10. 关键指标（KPI）

### 10.1 用户指标
- 注册用户数
- 日活跃用户数（DAU）
- 月活跃用户数（MAU）
- 用户留存率

### 10.2 内容指标
- 每日新增帖子数
- 每日新增评论数
- 平均帖子点赞数
- 帖子平均评论数

### 10.3 交互指标
- 用户参与度
- 平均会话时长
- 页面浏览量
- 跳出率

---

## 11. 开发计划

### Phase 1: MVP（当前阶段）
- ✅ 基础认证系统
- ✅ 帖子CRUD
- ✅ 评论系统
- ✅ 点赞系统
- ✅ 基础UI实现

### Phase 2: 增强功能（计划中）
- ⏳ 搜索和筛选
- ⏳ 用户个人资料
- ⏳ 图片优化
- ⏳ 性能优化

### Phase 3: 社区功能（计划中）
- ⏳ 关注系统
- ⏳ 通知系统
- ⏳ 内容推荐
- ⏳ 管理员功能

---

## 12. 风险评估

### 12.1 技术风险
- **风险**: InsForge服务稳定性
  - **缓解**: 监控服务状态，准备备用方案
- **风险**: 图片存储成本
  - **缓解**: 实施图片压缩和大小限制

### 12.2 产品风险
- **风险**: 用户增长缓慢
  - **缓解**: 优化SEO，增强社区运营
- **风险**: 垃圾内容
  - **缓解**: 实施内容审核机制

---

## 13. 待解决问题

### 13.1 技术债务
- [ ] 实现RLS（Row Level Security）
- [ ] 错误处理优化
- [ ] 加载状态优化
- [ ] 代码重构和模块化

### 13.2 功能完善
- [ ] 帖子编辑功能
- [ ] 密码重置功能
- [ ] 用户个人资料编辑
- [ ] 帖子详情页（独立路由）

---

## 14. 附录

### 14.1 相关文档
- [README.md](./README.md) - 项目说明文档
- [SETUP.md](./SETUP.md) - 环境配置文档

### 14.2 设计资源
- 设计理念：粗野主义（Brutalism）
- 参考：Craigslist, Hacker News等极简社区

### 14.3 技术文档
- [Next.js Documentation](https://nextjs.org/docs)
- [InsForge Documentation](https://docs.insforge.app)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)

---

**文档维护者**: 开发团队  
**最后更新**: 2024  
**下次评审**: 待定

